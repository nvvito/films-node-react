{"ast":null,"code":"import { message } from 'antd'; //tasks\n\nexport const fetchFilms = (page, sort_field, sort_direction) => dispatch => {\n  dispatch({\n    type: 'START_LOAD_FILMS',\n    payload: {\n      page: page,\n      sort_field: sort_field,\n      sort_direction: sort_direction\n    }\n  });\n  fetch(\"/api/film\").then(res => res.json()).then(data => {\n    setTimeout(() => {\n      if (data.status) {\n        dispatch({\n          type: 'SUCCESS_LOAD_FILMS',\n          payload: {\n            list: data.message.result,\n            count: Number(data.message.count)\n          }\n        });\n      } else {\n        message.error('Error Load Data!');\n        dispatch({\n          type: 'FAILED_LOAD_FILMS'\n        });\n      }\n    }, 500);\n  }).catch(err => {\n    console.log(err);\n    message.error('Error Load Data!');\n    dispatch({\n      type: 'FAILED_LOAD_FILMS'\n    });\n  });\n};\nexport const addTasks = values => dispatch => {\n  let data = new FormData();\n  data.append('username', values.username);\n  data.append('email', values.email);\n  data.append('text', values.text);\n  fetch('https://uxcandy.com/~shapoval/test-task-backend/v2/create/?developer=vito', {\n    method: 'POST',\n    body: data\n  }).then(res => res.json()).then(data => {\n    if (data.status === 'ok') {\n      dispatch({\n        type: 'ADD_TASKS',\n        payload: data.message\n      });\n      message.success('Success Create Task!');\n    } else {\n      message.error('Error Create Task!');\n      dispatch({\n        type: 'FAILED_LOAD_TASKS'\n      });\n    }\n  }).catch(err => {\n    console.log(err);\n    message.error('Error Create Task!');\n    dispatch({\n      type: 'FAILED_LOAD_TASKS'\n    });\n  });\n};\nexport const editTasks = (values, id, token) => dispatch => {\n  let data = new FormData();\n  values.status = values.status ? 10 : 0;\n  data.append('status', values.status);\n  data.append('text', values.text);\n  data.append('token', token);\n  fetch(\"https://uxcandy.com/~shapoval/test-task-backend/v2/edit/\".concat(id, \"/?developer=vito\"), {\n    method: 'POST',\n    body: data\n  }).then(res => res.json()).then(data => {\n    if (data.status === 'ok') {\n      dispatch({\n        type: 'EDIT_TASKS',\n        payload: {\n          data: values,\n          id: id\n        }\n      });\n      message.success('Success Update Task!');\n    } else {\n      if (data.message.hasOwnProperty('token')) {\n        /*notification['error']({\n          message: 'Error Update Task',\n          description: data.message.token,\n        })*/\n        dispatch({\n          type: 'AUTH_LOGOUT'\n        });\n        dispatch({\n          type: 'FAILED_LOAD_TASKS'\n        });\n      } else {\n        message.error('Error Update Task!');\n        dispatch({\n          type: 'FAILED_LOAD_TASKS'\n        });\n      }\n    }\n  }).catch(err => {\n    console.log(err);\n    message.error('Error Update Task!');\n    dispatch({\n      type: 'FAILED_LOAD_TASKS'\n    });\n  });\n}; //modal\n\nexport const openModal = () => ({\n  type: 'OPEN_MODAL'\n});\nexport const openUpdate = id => ({\n  type: 'OPEN_UPDATE',\n  payload: id\n});\nexport const closeModal = () => ({\n  type: 'CLOSE_MODAL'\n});\nexport const closeUpdate = () => ({\n  type: 'CLOSE_UPDATE'\n});","map":{"version":3,"sources":["/home/vito/Desktop/films/client/src/store/action.js"],"names":["message","fetchFilms","page","sort_field","sort_direction","dispatch","type","payload","fetch","then","res","json","data","setTimeout","status","list","result","count","Number","error","catch","err","console","log","addTasks","values","FormData","append","username","email","text","method","body","success","editTasks","id","token","hasOwnProperty","openModal","openUpdate","closeModal","closeUpdate"],"mappings":"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","sourcesContent":["import { message } from 'antd'\n\n//tasks\nexport const fetchFilms = (page, sort_field, sort_direction) => dispatch => {\n  dispatch({\n    type: 'START_LOAD_FILMS', payload: {\n      page: page,\n      sort_field: sort_field,\n      sort_direction: sort_direction\n    }\n  })\n  fetch(`/api/film`)\n    .then(res => res.json())\n    .then(data => {\n      setTimeout(() => {\n        if (data.status) {\n          dispatch({\n            type: 'SUCCESS_LOAD_FILMS',\n            payload: {\n              list: data.message.result,\n              count: Number(data.message.count),\n            }\n          })\n        } else {\n          message.error('Error Load Data!')\n          dispatch({ type: 'FAILED_LOAD_FILMS' })\n        }\n      }\n        , 500)\n    })\n    .catch(err => {\n      console.log(err)\n      message.error('Error Load Data!')\n      dispatch({ type: 'FAILED_LOAD_FILMS' })\n    })\n}\n\nexport const addTasks = values => dispatch => {\n  let data = new FormData()\n  data.append('username', values.username)\n  data.append('email', values.email)\n  data.append('text', values.text)\n\n  fetch('https://uxcandy.com/~shapoval/test-task-backend/v2/create/?developer=vito', {\n    method: 'POST',\n    body: data,\n  })\n    .then(res => res.json())\n    .then(data => {\n      if (data.status === 'ok') {\n        dispatch({ type: 'ADD_TASKS', payload: data.message })\n        message.success('Success Create Task!')\n      } else {\n        message.error('Error Create Task!')\n        dispatch({ type: 'FAILED_LOAD_TASKS' })\n      }\n    })\n    .catch(err => {\n      console.log(err)\n      message.error('Error Create Task!')\n      dispatch({ type: 'FAILED_LOAD_TASKS' })\n    })\n}\n\nexport const editTasks = (values, id, token) => dispatch => {\n  let data = new FormData()\n  values.status = values.status ? 10 : 0\n  data.append('status', values.status)\n  data.append('text', values.text)\n  data.append('token', token)\n\n  fetch(`https://uxcandy.com/~shapoval/test-task-backend/v2/edit/${id}/?developer=vito`, {\n    method: 'POST',\n    body: data,\n  })\n    .then(res => res.json())\n    .then(data => {\n      if (data.status === 'ok') {\n        dispatch({\n          type: 'EDIT_TASKS', payload: {\n            data: values,\n            id: id\n          }\n        })\n        message.success('Success Update Task!')\n      } else {\n        if (data.message.hasOwnProperty('token')) {\n          /*notification['error']({\n            message: 'Error Update Task',\n            description: data.message.token,\n          })*/\n          dispatch({ type: 'AUTH_LOGOUT' })\n          dispatch({ type: 'FAILED_LOAD_TASKS' })\n        } else {\n          message.error('Error Update Task!')\n          dispatch({ type: 'FAILED_LOAD_TASKS' })\n        }\n      }\n    })\n    .catch(err => {\n      console.log(err)\n      message.error('Error Update Task!')\n      dispatch({ type: 'FAILED_LOAD_TASKS' })\n    })\n}\n//modal\nexport const openModal = () => ({ type: 'OPEN_MODAL' })\nexport const openUpdate = id => ({ type: 'OPEN_UPDATE', payload: id })\nexport const closeModal = () => ({ type: 'CLOSE_MODAL' })\nexport const closeUpdate = () => ({ type: 'CLOSE_UPDATE' })"]},"metadata":{},"sourceType":"module"}